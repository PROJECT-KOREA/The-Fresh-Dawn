### 조선총독부 이벤트 ###
add_namespace = pk_ggk_startup
add_namespace = pk_ggk_generic
add_namespace = pk_ggk_korea

#프로젝트 코리아: 독립전쟁 0.1v 베타
country_event = {
    id = pk_ggk_startup.1
    title = pk_ggk_startup.1.t
    desc = pk_ggk_startup.1.desc
    picture = GFX_report_event_narration

    is_triggered_only = yes

    option = {
        name = pk_ggk_startup.1.a
        country_event = {
            id = pk_ggk_startup.2
            days = 0
        }
    }

    option = {
        name = pk_ggk_startup.1.b
    }
}

#1936년의 조선
country_event = {
    id = pk_ggk_startup.2
    title = pk_ggk_startup.2.t
    desc = pk_ggk_startup.2.desc
    picture = GFX_report_event_narration

    is_triggered_only = yes

    option = {
        name = pk_ggk_startup.2.a
    }
}

#본토의 병력 지원
country_event = {
    id = pk_ggk_generic.1
    title = pk_ggk_generic.1.t
    desc = pk_ggk_generic.1.desc
    picture = GFX_report_event_generic_military_parade

    is_triggered_only = yes

    option = {
        name = pk_ggk_generic.1.a
        add_manpower = 2000
        JAP = {
	        add_manpower = -2000
        }
    }
}

#미나미 지로 총독 취임
country_event = {
    id = pk_ggk_generic.2
    title = pk_ggk_generic.2.t
    desc = pk_ggk_generic.2.desc
    picture = GFX_report_event_generic_military_parade

    fire_only_once = yes
    
    trigger = {
		original_tag = GGK
		date > 1936.8.4
	}

    mean_time_to_happen = {
		days = 1
	}

    option = {
        name = pk_ggk_generic.2.a
		ai_chance = { factor = 100 }
        create_country_leader = {
            name = "Jirō Minami"
            desc = ""
            picture = "gfx/leaders/JAP_colony/Portrait_Jiro_Minami.dds"
            expire = "1965.1.1"
            ideology = fascism_ideology
            traits = {

            }
        }
    }
}

#고이소 구니아키 총독 취임
country_event = {
    id = pk_ggk_generic.3
    title = pk_ggk_generic.3.t
    desc = pk_ggk_generic.3.desc
    picture = GFX_report_event_generic_military_parade

    fire_only_once = yes
    
    trigger = {
		original_tag = GGK
		date > 1942.5.28
        NOT = {
            OR = {
                has_country_leader = {
                    name = "Kuniaki Koiso"
                    ruling_only = yes
                }
                has_country_leader = {
                    name = "Nobuyuki Abe"
                    ruling_only = yes
                }
            }
        }
	}

    mean_time_to_happen = {
		days = 1
	}

    option = {
        name = pk_ggk_generic.3.a
		ai_chance = { factor = 100 }
        create_country_leader = {
            name = "Kuniaki Koiso"
            desc = ""
            picture = "gfx/leaders/JAP_colony/Portrait_Koiso_Kuniaki.dds"
            expire = "1965.1.1"
            ideology = fascism_ideology
            traits = {

            }
        }
    }
}

#아베 노부유키 총독 취임
country_event = {
    id = pk_ggk_generic.4
    title = pk_ggk_generic.4.t
    desc = pk_ggk_generic.4.desc
    picture = GFX_report_event_generic_military_parade

    fire_only_once = yes
    
    trigger = {
		original_tag = GGK
		date > 1944.7.23
	}

    mean_time_to_happen = {
		days = 1
	}

    option = {
        name = pk_ggk_generic.4.a
		ai_chance = { factor = 100 }
        create_country_leader = {
            name = "Nobuyuki Abe"
            desc = ""
            picture = "gfx/leaders/JAP_colony/Portrait_Abe_Nobuyuki.dds"
            expire = "1965.1.1"
            ideology = fascism_ideology
            traits = {

            }
        }
    }
}


### 한국 독립운동 ###

#대한민국 임시정부의 정부 수립일 기념식
country_event = {
    id = pk_ggk_korea.1
    title = pk_ggk_korea.1.t
    desc = pk_ggk_korea.1.desc
    picture = GFX_report_event_KOR_kim_koo_speech

    is_triggered_only = yes
    fire_only_once = yes

    option = {
        name = pk_ggk_korea.1.a
    }
}

#사회주의 세력의 임시정부 합류
country_event = {
    id = pk_ggk_korea.2
    title = pk_ggk_korea.2.t
    desc = pk_ggk_korea.2.desc
    picture = GFX_report_event_KOR_kim_koo_with_kim_wonbong

    is_triggered_only = yes
    fire_only_once = yes

    option = {
        name = pk_ggk_korea.2.a
    }
}

#임시정부의 대대적인 내부 밀정 색출
country_event = {
    id = pk_ggk_korea.3
    title = pk_ggk_korea.3.t
    desc = pk_ggk_korea.3.desc
    picture = GFX_report_event_KOR_search_out_spies

    is_triggered_only = yes
    fire_only_once = yes

    option = {
        name = pk_ggk_korea.3.a
    }
}

#무장투쟁론의 대두
country_event = {
    id = pk_ggk_korea.4
    title = pk_ggk_korea.4.t
    desc = pk_ggk_korea.4.desc
    picture = GFX_report_event_KOR_provisional_assembly

    is_triggered_only = yes
    fire_only_once = yes

    option = {
        name = pk_ggk_korea.4.a
    }
}

#한국광복군 창설
country_event = {
    id = pk_ggk_korea.5
    title = pk_ggk_korea.5.t
    desc = pk_ggk_korea.5.desc
    picture = GFX_report_event_KOR_independence_army

    is_triggered_only = yes
    fire_only_once = yes

    option = {
        name = pk_ggk_korea.5.a
    }
}

#대한민국 임시정부의 지원 요청
country_event = {
    id = pk_ggk_korea.6
    title = pk_ggk_korea.6.t
    desc = pk_ggk_korea.6.desc
    picture = GFX_report_event_generic_read_write

    is_triggered_only = yes
    fire_only_once = yes

    option = {
        name = pk_ggk_korea.6.a
        ai_chance = {
            base = 100
            modifier = {
				factor = 10
				has_opinion_modifier = panay_inc_opinion_modifier
			}
            modifier = {
				factor = 10
				JAP = { has_offensive_war_with = CHI }
			}
            modifier = {
				factor = 10
				NOT = { JAP = { has_idea = MTG_naval_treaty_adherent } }
			}
        }
        set_country_flag = USA_seek_help_korea_promised
        GGK = {
            country_event = {
                id = pk_ggk_korea.7
                days = 1
            }
        }
    }
    
    option = {
        name = pk_ggk_korea.6.b
        ai_chance = {
            base = 7
            modifier = {
                factor = 100
                is_in_faction_with = JAP
            }
        }
        country_event = {
            id = pk_ggk_korea.8
            days = 0
        }
    }
}

#미국의 지원 요청 수락
country_event = {
    id = pk_ggk_korea.7
    title = pk_ggk_korea.7.t
    desc = pk_ggk_korea.7.desc
    picture = GFX_report_event_generic_read_write

    is_triggered_only = yes
    fire_only_once = yes

    option = {
        name = pk_ggk_korea.7.a
    }
}

#미국의 지원 요청 거절
country_event = {
    id = pk_ggk_korea.8
    title = pk_ggk_korea.8.t
    desc = pk_ggk_korea.8.desc
    picture = GFX_report_event_generic_read_write

    is_triggered_only = yes
    fire_only_once = yes

    option = {
        name = pk_ggk_korea.8.a
    }
}

#국내정진군 편성
country_event = {
    id = pk_ggk_korea.9
    title = pk_ggk_korea.9.t
    desc = {
        text = pk_ggk_korea.9.desc_USA_helps
        trigger = {
            USA = {
                has_country_flag = USA_seek_help_korea_promised
            }
        }
    }
    desc = {
        text = pk_ggk_korea.9.desc_USA_not_helps
        trigger = {
            USA = {
                NOT = { has_country_flag = USA_seek_help_korea_promised }
            }
        }
    }
    picture = GFX_report_event_KOR_independence_army2

    is_triggered_only = yes
    fire_only_once = yes

    option = {
        name = pk_ggk_korea.9.a
    }
}

#건국강령 제정
country_event = {
    id = pk_ggk_korea.10
    title = pk_ggk_korea.10.t
    desc = pk_ggk_korea.10.desc
    picture = GFX_report_event_KOR_jo_soang

    is_triggered_only = yes
    fire_only_once = yes

    option = {
        name = pk_ggk_korea.10.a
    }
}

#작전명 광복
country_event = {
    id = pk_ggk_korea.11
    title = pk_ggk_korea.11.t
    desc = pk_ggk_korea.11.desc
    picture = GFX_report_event_KOR_kim_koo_speech

    is_triggered_only = yes
    fire_only_once = yes

    immediate = {
        log = "[GetDateText]: [Root.GetName]: event pk_ggk_korea.11"
        hidden_effect = {
            set_global_flag = KOR_flag_woi_in_progress
            KOR = {
                transfer_state = 799
                set_capital = 799
                load_oob = KOR_War_of_Independence
                KOR_create_units = yes
                KOR_add_equipments_to_stockplie = yes
                if = {
                    limit = { has_template = "주둔지 사단" }
                    delete_unit_template_and_units = { division_template = "주둔지 사단" }
                }
                add_political_power = 500
                if = {
                    limit = { CHI = { has_war_with = JAP } }
                    if = {
                        limit = { CHI = { is_in_faction = yes } }
                        CHI = {
                            set_faction_name = korean_chinese_united_front
                            add_to_faction = KOR
                        }
                        KOR = {
                            add_to_war = { 
                                targeted_alliance = CHI 
                                enemy = JAP 
                                hostility_reason = asked_to_join
                            }
                        }
                        else = {
                            CHI = {
                                create_faction = korean_chinese_united_front
                                add_to_faction = KOR
                            }
                            KOR = {
                                add_to_war = { 
                                    targeted_alliance = CHI 
                                    enemy = JAP 
                                    hostility_reason = asked_to_join
                                }
                            }
                        }
                    }
                }
                if = {
                    limit = { NOT = { CHI = { has_war_with = JAP } } }
                    KOR = {
                        declare_war_on = {
                            target = GGK
                            type = take_core_state
                        }
                    }
                }
            }
        }
    }

    option = {
        name = pk_ggk_korea.11.a
        custom_effect_tooltip = pk_ggk_korea.11_tt
        hidden_effect = {
            KOR = {
                complete_national_focus = KOR_focus_korean_war_of_independence
                change_tag_from = GGK
            }
        }
    }
}


#테스트
country_event = {
    id = pk_ggk_korea.12
    title = pk_ggk_korea.12.t
    desc = pk_ggk_korea.12.desc
    picture = GFX_report_event_generic_military_parade

    is_triggered_only = yes
    fire_only_once = yes

    option = {
        name = pk_ggk_korea.12.a
        JAP = {
            declare_war_on = {
                target = CHI
                type = annex_everything
            }
        }
    }
}